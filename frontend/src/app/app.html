@if (isLoading()) {
  <p>Loading...</p>
} @else {
  <div class="continer m-5">
    <h1>Bank</h1>

    <h2 class="mt-5">Create customer</h2>
    <form
      class="flex flex-col m-5 gap-3"
      action="submit"
      [formGroup]="customerForm"
      (ngSubmit)="createCustomer()"
    >
      <select formControlName="documentType">
        <option value="CC">CC</option>
        <option value="CE">CE</option>
        <option value="PAS">PAS</option>
      </select>
      <input class="border-2 border-black" formControlName="documentNumber" required />
      <input class="border-2 border-black" formControlName="fullName" required />
      <input class="border-2 border-black" type="email" formControlName="email" required />
      @if (customerForm.controls.email.invalid && customerForm.controls.email.touched) {
        <p>email is required</p>
      }
      <button type="submit">Create customer</button>
    </form>

    <h2 class="mt-5">Customer List</h2>
    <ul>
      @for (customer of customers(); track customer.id) {
        <li (click)="selectCustomer(customer.id)">
          {{ customer.id }} - {{ customer.fullName }} - {{ customer.email }}
        </li>
      }
    </ul>

    <h2 class="mt-5">Selected User</h2>

    @if (selectedCustomer()) {
      <p>id: {{ selectedCustomer()?.documentType }} - {{ selectedCustomer()?.id }}</p>
      <p>name: {{ selectedCustomer()?.fullName }}</p>
      <p>email: {{ selectedCustomer()?.email }}</p>
      @if (accountInformation()) {
        <h3 class="mt-4">account information</h3>
        <p>id: {{ accountInformation()?.id }}</p>
        <p>account number: {{ accountInformation()?.accountNumber }}</p>
        <p>status: {{ accountInformation()?.status }}</p>
      } @else {
        <form
          class="flex flex-col m-5 gap-3"
          action="submit"
          [formGroup]="accountForm"
          (ngSubmit)="createAccount()"
        >
          <select formControlName="status">
            <option value="ACTIVE">ACTIVE</option>
            <option value="INACTIVE">INACTIVE</option>
          </select>
          <button type="submit">Create account</button>
        </form>
      }
    } @else {
      <p>no selected user yet</p>
    }
  </div>
}
